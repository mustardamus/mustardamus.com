---
import { Image } from "astro:assets";
import { getAlbumPhotos, getAlbumPhoto } from "@src/lib/photos.ts";
import Layout from "@src/layouts/Layout.astro";
import type { GetStaticPaths } from "astro";

interface Params {
  album: string;
  photo: string;
}

export const getStaticPaths = (() => {
  const albums = ["digital-nomad"];

  return albums.flatMap((album) => {
    return getAlbumPhotos(album).map((photo) => {
      return { params: { album: photo.album, photo: photo.name } };
    });
  });
}) satisfies GetStaticPaths;

const { album, photo } = Astro.params as Params;
const photoObj = getAlbumPhoto(album, photo);
---

<Layout>
  {photoObj && <Image src={photoObj.import()} alt={photoObj.name} />}
</Layout>
