---
import { Image } from "astro:assets";
import { getPreviousPhoto, getNextPhoto } from "@src/lib/albums.ts";
import PrevNextPhoto from "./PrevNextPhoto.astro";
import type { Photo } from "@src/env";

interface Props {
  photo: Photo;
}

const { photo } = Astro.props as Props;
const previousPhoto = getPreviousPhoto(photo);
const nextPhoto = getNextPhoto(photo);
---

<div
  id="photo"
  class="p-2 rounded-sm bg-light-secondary dark:bg-dark-secondary"
>
  <div class="relative">
    <div class="w-full text-center z-20">
      <Image
        src={photo.import()}
        alt={photo.name}
        width={1280}
        class="rounded-sm inline-block"
      />
    </div>

    <div
      class:list={[
        "flex z-30",
        "*:w-1/2 *:mt-2 *:lg:w-auto *:lg:absolute *:lg:top-0",
      ]}
    >
      <div class="-translate-x-4 lg:-left-1">
        {previousPhoto && <PrevNextPhoto photo={previousPhoto} />}
      </div>

      <div class="translate-x-4 text-right lg:-right-1" ]}>
        {nextPhoto && <PrevNextPhoto photo={nextPhoto} isNext={true} />}
      </div>
    </div>
  </div>
</div>
