---
import { Image } from "astro:assets";
import { getPreviousPhoto, getNextPhoto } from "@src/lib/albums.ts";
import PrevNextPhoto from "./PrevNextPhoto.astro";
import type { Photo } from "@src/env";

interface Props {
  photo: Photo;
}

const { photo } = Astro.props as Props;
const previousPhoto = getPreviousPhoto(photo);
const nextPhoto = getNextPhoto(photo);
---

<div
  id="photo"
  class:list={[
    "p-2 rounded-sm overflow-hidden",
    "bg-light-secondary dark:bg-dark-secondary",
  ]}
>
  <div class="relative flex flex-wrap items-center justify-center">
    <div class="w-full text-center z-20">
      <Image
        src={photo.import()}
        alt={photo.name}
        width={1280}
        class="rounded-sm inline-block"
      />
    </div>

    <div
      class:list={[
        "w-1/2 mt-2 -translate-x-4 z-30",
        "lg:w-auto lg:absolute lg:top-0 lg:-left-1 ",
      ]}
    >
      {previousPhoto && <PrevNextPhoto photo={previousPhoto} />}
    </div>

    <div
      class:list={[
        "w-1/2 mt-2 translate-x-4 z-30 text-right",
        "translate-y-[3px] lg:translate-y-0",
        "lg:w-auto lg:absolute lg:top-0 lg:-right-1 ",
      ]}
    >
      {nextPhoto && <PrevNextPhoto photo={nextPhoto} isNext={true} />}
    </div>
  </div>
</div>
